<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<base href="/">
		<title>NMDP</title>
	</head>
	<body>
		<script src="./sources/js/post.js"></script>
		<script src="./sources/js/get-name.js"></script>
		<style>
			* {
				margin: 0;
			}
			button {
				height: 60px;
				width: 165px;
				font-size: 1.5em;
				align-self: center;
				justify-self: center;
				background-color: whitesmoke;
				border: 1px solid black;
				border-radius: 4px;
			}
			button:hover {
				background-color: rgb(196, 196, 196);
			}
		</style>
		<div style="display: grid; align-content: center; justify-content: center; gap: 7px; grid-gap: 7px; height: 100vh; width: 100vw;">
			<h1 style="font-size: 40px; text-align: center;">
				索引 - NMDP
			</h1>
			<p style="font-size: 20px; text-align: center;">
				欢迎来到用于学(tui)习(fei)的网站!
			</p>
			<div style="height: 35px;"></div>
			<button onclick="location.href=location.origin+'/atom';">Atom</button>
			<button onclick="location.href=location.origin+'/area';">Area</button>
			<button onclick="location.href=location.origin+'/mosiyuan';">膜<strong style="color:black;">S<span style="color:red;">iyuan</span></strong></button>
			<button onclick="location.href=location.origin+'/paint-board';">绘板</button>
			<button onclick="location.href=location.origin+'/forty';">四十米长刀</button>
			<button id="account"></button>
			<div style="height: 15vh;"></div>
		</div>
		<script>
			(async () => {
				let tag = 1;
				try {
					new WebSocket(`wss://${location.host}/wss/`);
				}
				catch (e) {
					tag = 0;
				}
				if(tag && await getName() === '') tag = 0; 
				let btn = document.getElementById('account');
				btn.innerHTML = tag ? '账号管理' : '登录';
				btn.addEventListener('click', () => {
					if(tag) location.href = location.origin + '/account';
					else location.href = location.origin + '/login';
				});
			})();
		</script>
	</body>
</html>